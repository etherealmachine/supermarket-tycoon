(this["webpackJsonpsupermarket-tycoon"]=this["webpackJsonpsupermarket-tycoon"]||[]).push([[0],{30:function(e,t,r){e.exports=r(49)},36:function(e,t,r){},37:function(e,t,r){var a=r(38);"string"===typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};r(21)(a,n);a.locals&&(e.exports=a.locals)},38:function(e,t,r){(t=r(20)(!1)).push([e.i,"\n  ._1qyj-fZ0q-xtCVquzyJpPF {\n    height: 50px;\n    margin: 0 4px 0 4px;\n  }\n",""]),t.locals={licenseIcon:"_1qyj-fZ0q-xtCVquzyJpPF"},e.exports=t},45:function(e,t,r){var a=r(46);"string"===typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};r(21)(a,n);a.locals&&(e.exports=a.locals)},46:function(e,t,r){(t=r(20)(!1)).push([e.i,"\n  ._3yWrz0X0-IjlWfvmG2JrT- {\n    text-decoration: underline;\n  }\n",""]),t.locals={underline:"_3yWrz0X0-IjlWfvmG2JrT-"},e.exports=t},49:function(e,t,r){"use strict";r.r(t);r(31);var a,n,o,c,s,i,u,d,l,m,p,y,h,f,b,v,k,E=r(0),g=r.n(E),z=r(23),C=r.n(z),S=(r(36),r(3)),x=r(28),O=r(2),j=r(24),N=r(25),G=r(4),w=r(29),P=r(26),I=[];function R(e){return function(t,r,a){var n=a.value;a.value=function(){var t=Array.from(arguments);this.setState(Object(P.a)(this,(function(r){var a=JSON.stringify(r);n.bind(r).apply(void 0,Object(w.a)(t));var o=JSON.stringify(r);e&&e.undoable&&(0===I.length||I[I.length-1]!==a)&&o!==a&&(I.push(a),I.length>100&&I.splice(0,I.length-100)),r.hasOwnProperty("notifyChange")&&r.notifyChange()})))}}}var D={bakery:"Bakery",dairy:"Dairy",dryGoods:"Dry Goods",frozen:"Frozen Foods",produce:"Produce"},M=["every","2","3","4","5","6","never"];function A(e){for(var t=e.length;0!==t;){var r=Math.floor(Math.random()*t),a=e[t-=1];e[t]=e[r],e[r]=a}}var J={2:2.78,3:5.56,4:8.33,5:11.11,6:13.89,7:16.67,8:13.89,9:11.11,10:8.33,11:5.56,12:2.78};var B={2:[6,7],3:[4,10],4:[5,9],5:[2,10],6:[4,12],7:[3,8],8:[7,12],9:[5,11],10:[6,11],11:[2,9],12:[3,9]},W=(a=R(),n=R(),o=R({undoable:!0}),c=R(),s=R({undoable:!0}),i=R({undoable:!0}),u=R({undoable:!0}),d=R({undoable:!0}),l=R({undoable:!0}),m=R({undoable:!0}),p=R({undoable:!0}),y=R({undoable:!0}),h=R({undoable:!0}),f=R({undoable:!0}),b=R({undoable:!0}),v=R(),k=function(){function e(){Object(j.a)(this,e),this.setState=function(e){},this.notifyChange=function(){},this.cash=0,this.round=0,this.phase="purchasing",this.departments={bakery:{price:4,salePrice:3,sale:!1,stock:{2:3,3:0,4:0,5:0,6:0,never:0}},dairy:{price:4,salePrice:2,sale:!1,stock:{3:3,4:0,5:0,6:0,never:0}},dryGoods:{price:10,salePrice:7,sale:!1,stock:{4:3,5:0,6:0,never:0}},frozen:{price:7,salePrice:5,sale:!1,stock:{never:3}},produce:{price:3,salePrice:2,sale:!1,stock:{every:3}}},this.stockRoom={},this.customers=[{name:"Regina",coupons:1,penalty:4,cartSize:3,cart:[],demand:{frozen:[2,3,4],dairy:[5,6],produce:[7],bakery:[8,9],dryGoods:[10,11,12]}},{name:"Ryan",coupons:1,penalty:2,cartSize:2,cart:[],demand:{frozen:[6,7,8],dairy:[4,5],produce:[2,3],bakery:[11,12],dryGoods:[9,10]}},{name:"Rory",coupons:0,penalty:4,cartSize:1,cart:[],demand:{frozen:[],dairy:[6,7,8],produce:[9,10,11,12],bakery:[],dryGoods:[2,3,4,5]}},{name:"Dave",coupons:2,bonus:8,penalty:12,cartSize:4,cart:[],demand:{frozen:[11,12],dairy:[7],produce:[2,3,4],bakery:[5,6],dryGoods:[8,9,10]}},{name:"Lesley",coupons:0,penalty:5,cartSize:3,cart:[],demand:{frozen:[12],dairy:[3,4,5],produce:[6,7,8],bakery:[9,10,11],dryGoods:[2]}},{name:"Mo",coupons:0,penalty:3,cartSize:1,cart:[],demand:{frozen:[],dairy:[2,3],produce:[4,5,6,7],bakery:[8,9,10],dryGoods:[11,12]}},{name:"Amanda",coupons:0,penalty:5,cartSize:3,cart:[],demand:{frozen:[4,5,6],dairy:[],produce:[2,3],bakery:[10,11,12],dryGoods:[7,8,9]}},{name:"Scott",coupons:0,penalty:6,cartSize:2,cart:[],demand:{frozen:[],dairy:[7,8,9,10,11],produce:[3,4,5,6],bakery:[2],dryGoods:[12]}},{name:"Wendell",coupons:0,penalty:5,cartSize:1,cart:[],demand:{frozen:[2,3,4,5],dairy:[9,10,11,12],produce:[8],bakery:[7],dryGoods:[6]}},{name:"Diane",coupons:0,penalty:7,cartSize:4,cart:[],demand:{frozen:[11,12],dairy:[2,3],produce:[],bakery:[4,5,6,7,8,9,10],dryGoods:[]}},{name:"Gary",coupons:2,penalty:7,cartSize:4,cart:[],demand:{frozen:[11,2],dairy:[5,6],produce:[7,8],bakery:[9,10],dryGoods:[2,3,4]}},{name:"Margaret",coupons:0,penalty:3,cartSize:2,cart:[],demand:{frozen:[2,3,4],dairy:[7,8],produce:[5,6],bakery:[9,10],dryGoods:[11,12]}},{name:"Amy",coupons:0,bonus:10,penalty:15,cartSize:5,cart:[],demand:{frozen:[2,3,4],dairy:[12],produce:[7,8],bakery:[9,10,11],dryGoods:[5,6]}},{name:"Tiffany",coupons:1,penalty:3,cartSize:2,cart:[],demand:{frozen:[9,10,11,12],dairy:[8],produce:[7],bakery:[5,6],dryGoods:[2,3,4]}},{name:"Chris",coupons:1,penalty:9,cartSize:4,cart:[],demand:{frozen:[11,12],dairy:[2],produce:[3,4,5,6],bakery:[10],dryGoods:[7,8,9]}},{name:"George",coupons:1,penalty:8,cartSize:4,cart:[],demand:{frozen:[8,9,10,11,12],dairy:[],produce:[],bakery:[2,3,4,5,6,7],dryGoods:[]}},{name:"Mikolaj",coupons:1,penalty:4,cartSize:2,cart:[],demand:{frozen:[10,11,12],dairy:[2,3,4],produce:[],bakery:[7],dryGoods:[5,6]}},{name:"Rose",coupons:1,penalty:6,cartSize:3,cart:[],demand:{frozen:[6,7],dairy:[5],produce:[2,3,4],bakery:[11,12],dryGoods:[8,9,10]}},{name:"Stu",coupons:0,penalty:8,cartSize:2,cart:[],demand:{frozen:[2,3,4,5,6,7,8,9,10,11,12],dairy:[],produce:[],bakery:[],dryGoods:[]}},{name:"Melanie",coupons:0,penalty:5,cartSize:1,cart:[],demand:{frozen:[2,3],dairy:[8,9,10],produce:[11,12],bakery:[4],dryGoods:[5,6,7]}},{name:"Phil",coupons:2,penalty:10,cartSize:4,cart:[],demand:{frozen:[],dairy:[7,8,9],produce:[4,5,6],bakery:[10,11,12],dryGoods:[2,3]}},{name:"Zo\xeb",coupons:1,bonus:9,penalty:13,cartSize:5,cart:[],demand:{frozen:[2,3,4],dairy:[9,10],produce:[11,12],bakery:[5,6,7],dryGoods:[8]}},{name:"Chad",coupons:1,penalty:6,cartSize:3,cart:[],demand:{frozen:[9],dairy:[2,3],produce:[7,8],bakery:[4,5,6],dryGoods:[10,11,12]}},{name:"Albert",coupons:1,penalty:5,cartSize:3,cart:[],demand:{frozen:[11,12],dairy:[8,9,10],produce:[5,6],bakery:[7],dryGoods:[2,3,4]}},{name:"Jordan",coupons:0,penalty:8,cartSize:3,cart:[],demand:{frozen:[9],dairy:[2,3,4],produce:[5],bakery:[6,7,8],dryGoods:[10,11,12]}},{name:"Martha",coupons:1,penalty:6,cartSize:2,cart:[],demand:{frozen:[10,11,12],dairy:[8,9],produce:[6,7],bakery:[2,3,4,5],dryGoods:[]}},{name:"Jackie",coupons:2,penalty:9,cartSize:4,cart:[],demand:{frozen:[11,12],dairy:[7],produce:[4,5,6],bakery:[2,3],dryGoods:[8,9,10]}},{name:"Donna",coupons:0,penalty:8,cartSize:1,cart:[],demand:{frozen:[10,11,12],dairy:[8,9],produce:[5],bakery:[6,7],dryGoods:[2,3,4]}},{name:"Clara",coupons:1,penalty:7,cartSize:3,cart:[],demand:{frozen:[8],dairy:[5,6],produce:[9,10,11,12],bakery:[7],dryGoods:[2,3,4]}},{name:"Jacob",coupons:1,penalty:8,cartSize:4,cart:[],demand:{frozen:[6,7],dairy:[10,11,12],produce:[2,3,4],bakery:[5],dryGoods:[8,9]}}],this.costs=[{bakery:3,dairy:1,dryGoods:3,frozen:3,produce:2},{bakery:3,dairy:2,dryGoods:5,frozen:3,produce:1},{bakery:1,dairy:2,dryGoods:5,frozen:3,produce:3},{bakery:2,dairy:3,dryGoods:3,frozen:4,produce:1},{bakery:2,dairy:3,dryGoods:4,frozen:5,produce:1},{produce:1,bakery:2,dairy:2,dryGoods:6,frozen:4}],this.currentCustomers=[],this.currentCustomerIndex=void 0,this.currentCosts={bakery:0,dairy:0,dryGoods:0,frozen:0,produce:0},0===this.cash&&0===this.round&&this.setup()}return Object(N.a)(e,[{key:"setup",value:function(){var e=this;this.cash=15,this.round=0,this.phase="purchasing",this.departments={bakery:{price:4,salePrice:3,sale:!1,stock:{2:3,3:0,4:0,5:0,6:0,never:0}},dairy:{price:4,salePrice:2,sale:!1,stock:{3:3,4:0,5:0,6:0,never:0}},dryGoods:{price:10,salePrice:7,sale:!1,stock:{4:3,5:0,6:0,never:0}},frozen:{price:7,salePrice:5,sale:!1,stock:{never:3}},produce:{price:3,salePrice:2,sale:!1,stock:{every:3}}},this.stockRoom={},Object.keys(D).forEach((function(t){e.stockRoom[t]={every:0,2:0,3:0,4:0,5:0,6:0,never:0}})),this.customers=[{name:"Regina",coupons:1,penalty:4,cartSize:3,cart:[],demand:{frozen:[2,3,4],dairy:[5,6],produce:[7],bakery:[8,9],dryGoods:[10,11,12]}},{name:"Ryan",coupons:1,penalty:2,cartSize:2,cart:[],demand:{frozen:[6,7,8],dairy:[4,5],produce:[2,3],bakery:[11,12],dryGoods:[9,10]}},{name:"Rory",coupons:0,penalty:4,cartSize:1,cart:[],demand:{frozen:[],dairy:[6,7,8],produce:[9,10,11,12],bakery:[],dryGoods:[2,3,4,5]}},{name:"Dave",coupons:2,bonus:8,penalty:12,cartSize:4,cart:[],demand:{frozen:[11,12],dairy:[7],produce:[2,3,4],bakery:[5,6],dryGoods:[8,9,10]}},{name:"Lesley",coupons:0,penalty:5,cartSize:3,cart:[],demand:{frozen:[12],dairy:[3,4,5],produce:[6,7,8],bakery:[9,10,11],dryGoods:[2]}},{name:"Mo",coupons:0,penalty:3,cartSize:1,cart:[],demand:{frozen:[],dairy:[2,3],produce:[4,5,6,7],bakery:[8,9,10],dryGoods:[11,12]}},{name:"Amanda",coupons:0,penalty:5,cartSize:3,cart:[],demand:{frozen:[4,5,6],dairy:[],produce:[2,3],bakery:[10,11,12],dryGoods:[7,8,9]}},{name:"Scott",coupons:0,penalty:6,cartSize:2,cart:[],demand:{frozen:[],dairy:[7,8,9,10,11],produce:[3,4,5,6],bakery:[2],dryGoods:[12]}},{name:"Wendell",coupons:0,penalty:5,cartSize:1,cart:[],demand:{frozen:[2,3,4,5],dairy:[9,10,11,12],produce:[8],bakery:[7],dryGoods:[6]}},{name:"Diane",coupons:0,penalty:7,cartSize:4,cart:[],demand:{frozen:[11,12],dairy:[2,3],produce:[],bakery:[4,5,6,7,8,9,10],dryGoods:[]}},{name:"Gary",coupons:2,penalty:7,cartSize:4,cart:[],demand:{frozen:[11,2],dairy:[5,6],produce:[7,8],bakery:[9,10],dryGoods:[2,3,4]}},{name:"Margaret",coupons:0,penalty:3,cartSize:2,cart:[],demand:{frozen:[2,3,4],dairy:[7,8],produce:[5,6],bakery:[9,10],dryGoods:[11,12]}},{name:"Amy",coupons:0,bonus:10,penalty:15,cartSize:5,cart:[],demand:{frozen:[2,3,4],dairy:[12],produce:[7,8],bakery:[9,10,11],dryGoods:[5,6]}},{name:"Tiffany",coupons:1,penalty:3,cartSize:2,cart:[],demand:{frozen:[9,10,11,12],dairy:[8],produce:[7],bakery:[5,6],dryGoods:[2,3,4]}},{name:"Chris",coupons:1,penalty:9,cartSize:4,cart:[],demand:{frozen:[11,12],dairy:[2],produce:[3,4,5,6],bakery:[10],dryGoods:[7,8,9]}},{name:"George",coupons:1,penalty:8,cartSize:4,cart:[],demand:{frozen:[8,9,10,11,12],dairy:[],produce:[],bakery:[2,3,4,5,6,7],dryGoods:[]}},{name:"Mikolaj",coupons:1,penalty:4,cartSize:2,cart:[],demand:{frozen:[10,11,12],dairy:[2,3,4],produce:[],bakery:[7],dryGoods:[5,6]}},{name:"Rose",coupons:1,penalty:6,cartSize:3,cart:[],demand:{frozen:[6,7],dairy:[5],produce:[2,3,4],bakery:[11,12],dryGoods:[8,9,10]}},{name:"Stu",coupons:0,penalty:8,cartSize:2,cart:[],demand:{frozen:[2,3,4,5,6,7,8,9,10,11,12],dairy:[],produce:[],bakery:[],dryGoods:[]}},{name:"Melanie",coupons:0,penalty:5,cartSize:1,cart:[],demand:{frozen:[2,3],dairy:[8,9,10],produce:[11,12],bakery:[4],dryGoods:[5,6,7]}},{name:"Phil",coupons:2,penalty:10,cartSize:4,cart:[],demand:{frozen:[],dairy:[7,8,9],produce:[4,5,6],bakery:[10,11,12],dryGoods:[2,3]}},{name:"Zo\xeb",coupons:1,bonus:9,penalty:13,cartSize:5,cart:[],demand:{frozen:[2,3,4],dairy:[9,10],produce:[11,12],bakery:[5,6,7],dryGoods:[8]}},{name:"Chad",coupons:1,penalty:6,cartSize:3,cart:[],demand:{frozen:[9],dairy:[2,3],produce:[7,8],bakery:[4,5,6],dryGoods:[10,11,12]}},{name:"Albert",coupons:1,penalty:5,cartSize:3,cart:[],demand:{frozen:[11,12],dairy:[8,9,10],produce:[5,6],bakery:[7],dryGoods:[2,3,4]}},{name:"Jordan",coupons:0,penalty:8,cartSize:3,cart:[],demand:{frozen:[9],dairy:[2,3,4],produce:[5],bakery:[6,7,8],dryGoods:[10,11,12]}},{name:"Martha",coupons:1,penalty:6,cartSize:2,cart:[],demand:{frozen:[10,11,12],dairy:[8,9],produce:[6,7],bakery:[2,3,4,5],dryGoods:[]}},{name:"Jackie",coupons:2,penalty:9,cartSize:4,cart:[],demand:{frozen:[11,12],dairy:[7],produce:[4,5,6],bakery:[2,3],dryGoods:[8,9,10]}},{name:"Donna",coupons:0,penalty:8,cartSize:1,cart:[],demand:{frozen:[10,11,12],dairy:[8,9],produce:[5],bakery:[6,7],dryGoods:[2,3,4]}},{name:"Clara",coupons:1,penalty:7,cartSize:3,cart:[],demand:{frozen:[8],dairy:[5,6],produce:[9,10,11,12],bakery:[7],dryGoods:[2,3,4]}},{name:"Jacob",coupons:1,penalty:8,cartSize:4,cart:[],demand:{frozen:[6,7],dairy:[10,11,12],produce:[2,3,4],bakery:[5],dryGoods:[8,9]}}],this.costs=[{bakery:3,dairy:1,dryGoods:3,frozen:3,produce:2},{bakery:3,dairy:2,dryGoods:5,frozen:3,produce:1},{bakery:1,dairy:2,dryGoods:5,frozen:3,produce:3},{bakery:2,dairy:3,dryGoods:3,frozen:4,produce:1},{bakery:2,dairy:3,dryGoods:4,frozen:5,produce:1},{produce:1,bakery:2,dairy:2,dryGoods:6,frozen:4}],A(this.customers),A(this.costs),this.currentCustomers=[],this.currentCosts={bakery:0,dairy:0,dryGoods:0,frozen:0,produce:0},this.currentCustomerIndex=void 0,this.prepare()}},{key:"prepare",value:function(){this.round++;for(var e=0;e<5;e++){var t=this.customers.pop();if(!t)throw new Error("ran out of customers");e<2&&(t.visible=!0),this.currentCustomers.push(t)}var r=this.costs.pop();if(!r)throw new Error("ran out of costs");this.currentCosts=r,this.currentCustomerIndex=void 0}},{key:"startRestocking",value:function(e){if(this.phase="restocking",void 0===this.currentCustomerIndex)this.currentCustomers.slice(e,1);else if(this.currentCustomerIndex===e){var t=this.currentCustomers[this.currentCustomerIndex];this.cash-=t.penalty,t.roll=void 0,this.currentCustomers[this.currentCustomerIndex].shopping=!1,this.currentCustomers.splice(this.currentCustomerIndex,1),this.currentCustomerIndex=void 0}}},{key:"startCleanup",value:function(){var e=this;this.currentCustomers=[],this.currentCustomerIndex=void 0,Object.values(this.departments).forEach((function(t){e.round in t.stock&&(e.cash-=t.stock[e.round],t.stock[e.round]=0),"every"in t.stock&&(e.cash-=t.stock.every,t.stock.every=0)})),Object.values(this.stockRoom).forEach((function(t){e.round in t&&(e.cash-=t[e.round],t[e.round]=0),"every"in t&&(e.cash-=t.every,t.every=0)}))}},{key:"nextPhase",value:function(){if(void 0===this.phase)return this.phase="purchasing",void this.prepare();if("purchasing"!==this.phase)if("stocking"!==this.phase){if("shopping1"===this.phase||"shopping2"===this.phase)return this.phase="cleanup",void this.startCleanup();if("restocking"!==this.phase)return"cleanup"===this.phase?6===this.round?void(this.phase=void 0):(this.phase="purchasing",void this.prepare()):void 0;this.phase="shopping2"}else this.phase="shopping1";else this.phase="stocking"}},{key:"startSale",value:function(e){this.departments[e].sale=!0}},{key:"startCustomer",value:function(e){this.currentCustomers[e].visible=!0,this.currentCustomers[e].shopping=!0,this.currentCustomerIndex=e,this.advanceCustomer()}},{key:"advanceCustomer",value:function(){if(void 0===this.currentCustomerIndex)throw new Error("no customer");this.currentCustomers[this.currentCustomerIndex].roll=Math.floor(6*Math.random())+1+(Math.floor(6*Math.random())+1)}},{key:"finishCustomer",value:function(){if(void 0===this.currentCustomerIndex)throw new Error("no customer");var e=this.currentCustomers[this.currentCustomerIndex];e.bonus&&(this.cash+=e.bonus),e.shopping=!1,this.currentCustomers.splice(this.currentCustomerIndex,1),this.currentCustomerIndex=void 0}},{key:"buyStock",value:function(e){this.cash-=this.currentCosts[e],this.stockRoom[e][this.expiration(e)]++}},{key:"moveStock",value:function(e){for(var t,r=0;r<M.length;r++){var a=M[r];if(this.stockRoom[e][a]){this.stockRoom[e][a]--,t=a;break}}t&&this.departments[e].stock[t]++}},{key:"removeOldestItem",value:function(e){for(var t=0;t<M.length;t++){var r=M[t];if(this.departments[e].stock[r])return this.departments[e].stock[r]--,!0}return!1}},{key:"purchase",value:function(){var e=this;if(void 0===this.currentCustomerIndex)throw new Error("no customer");var t=this.currentCustomers[this.currentCustomerIndex],r=t.roll;if(void 0===r)throw new Error("cannot purchase without roll");var a=Object.keys(t.demand).find((function(e){return t.demand[e].includes(r)}));if(void 0===a)throw new Error("".concat(r," not found for ").concat(t.name));if(this.departments[a].sale){var n=B[r],o=Object.keys(t.demand).filter((function(e){return n.find((function(r){return t.demand[e].includes(r)}))}));o.forEach((function(t){return e.removeOldestItem(t)})),o.forEach((function(r){return t.cart.push({dept:r,price:e.price(r),coupon:!1,sale:e.departments[r].sale})})),o.forEach((function(t){return e.cash+=e.price(t)}))}this.removeOldestItem(a),t.cart.push({dept:a,price:this.price(a),coupon:!1,sale:this.departments[a].sale}),this.cash+=this.price(a),t.roll=void 0}},{key:"purchaseWithCoupon",value:function(){var e=this;if(void 0===this.currentCustomerIndex)throw new Error("no customer");var t=this.currentCustomers[this.currentCustomerIndex];if(void 0===t.roll)throw new Error("cannot purchase without roll");var r=B[t.roll],a=Object.keys(t.demand).filter((function(e){return r.find((function(r){return t.demand[e].includes(r)}))}));void 0===a[1]&&(a[1]=a[0]),a.forEach((function(t){return e.removeOldestItem(t)})),a.forEach((function(r){return t.cart.push({dept:r,price:e.price(r)-1,coupon:!0,sale:!1})})),a.forEach((function(t){e.cash+=e.price(t)-1})),t.coupons--,t.roll=void 0}},{key:"impulseBuy",value:function(e){if(void 0===this.currentCustomerIndex)throw new Error("no customer");var t=this.currentCustomers[this.currentCustomerIndex];this.removeOldestItem(e),this.cash+=this.price(e),t.impulseBuy={dept:e,price:this.price(e),coupon:!1,sale:!0}}},{key:"failCustomer",value:function(){var e=this;if(void 0===this.currentCustomerIndex)throw new Error("no customer");var t=this.currentCustomers[this.currentCustomerIndex];t.cart.forEach((function(t){e.cash-=t.price})),this.cash-=t.penalty,t.cartSize=0,t.roll=void 0,this.currentCustomers[this.currentCustomerIndex].shopping=!1,this.currentCustomers.splice(this.currentCustomerIndex,1),this.currentCustomerIndex=void 0}},{key:"undo",value:function(){if(0!==I.length){var e=I.pop();e&&Object.assign(this,JSON.parse(e))}}},{key:"canStartCustomer",value:function(e){return this.cash>=0&&["shopping1","shopping2"].includes(this.phase||"")&&!e.shopping&&void 0===this.currentCustomerIndex}},{key:"canAdvanceCustomer",value:function(e){return e.shopping&&!e.roll&&e.cart.length<e.cartSize}},{key:"canFinishCustomer",value:function(e){return e.shopping&&!e.roll&&e.cart.length>=e.cartSize}},{key:"mustFailCustomer",value:function(e){return e.shopping&&e.roll&&this.cannotPurchase(e)}},{key:"cannotPurchase",value:function(e){var t=this;return void 0===Object.keys(D).find((function(r){return t.canPurchase(e,r)}))}},{key:"canPurchase",value:function(e,t){if(!e.roll)return!1;if(!e.demand[t].includes(e.roll))return!1;if(!this.hasStock(t))return!1;if(e.cart.length>=e.cartSize)return!1;if(this.departments[t].sale){var r=B[e.roll],a=Object.keys(e.demand).filter((function(t){return r.find((function(r){return e.demand[t].includes(r)}))})),n=Object(S.a)(a,2),o=n[0],c=n[1];return this.hasStock(o)&&this.hasStock(c)}return!0}},{key:"canPurchaseWithCoupon",value:function(e,t){if(void 0===e.roll)return!1;if(0===e.coupons)return!1;if(e.cart.length+2>e.cartSize)return!1;var r=B[e.roll],a=Object.keys(e.demand).filter((function(t){return r.find((function(r){return e.demand[t].includes(r)}))})),n=Object(S.a)(a,2),o=n[0],c=n[1];return void 0===c?o===t&&this.hasStock(o,2):(o===t||c===t)&&this.hasStock(o)&&this.hasStock(c)}},{key:"canImpulseBuy",value:function(e,t){return!!e.shopping&&(!!this.departments[t].sale&&(!(e.cart.length>=e.cartSize)&&(!!this.hasStock(t)&&(!(e.cart.length>0)&&(void 0===e.roll&&void 0===e.impulseBuy)))))}},{key:"hasStock",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object.values(this.departments[e].stock).reduce((function(e,t){return e+t}),0)>=t}},{key:"price",value:function(e){return this.departments[e].sale?this.departments[e].salePrice:this.departments[e].price}},{key:"inStore",value:function(){return Object.values(this.departments).reduce((function(e,t){return e+Object.values(t.stock).reduce((function(e,t){return e+t}),0)}),0)}},{key:"inStockRoom",value:function(){return Object.values(this.stockRoom).reduce((function(e,t){return e+Object.values(t).reduce((function(e,t){return e+t}),0)}),0)}},{key:"canBuyStock",value:function(e){return this.cash>=this.currentCosts[e]&&this.inStockRoom()<20}},{key:"canMoveStock",value:function(e){return Object.values(this.stockRoom[e]).reduce((function(e,t){return e+t}),0)>0&&this.inStore()<15}},{key:"canStartRestocking",value:function(){return this.cash>=0&&"shopping1"===this.phase&&(void 0===this.currentCustomerIndex||this.canAdvanceCustomer(this.currentCustomers[this.currentCustomerIndex]))}},{key:"canAdvancePhase",value:function(){return!(["shopping1","shopping2"].includes(this.phase||"")&&this.currentCustomers.length>0)}},{key:"canUndo",value:function(){return I.length>0}},{key:"expiration",value:function(e){switch(e){case"produce":return"every";case"bakery":return Math.min(6,this.round+2);case"dairy":return Math.min(6,this.round+3);case"dryGoods":return Math.min(6,this.round+4);case"frozen":return"never"}return NaN}}]),e}(),Object(G.a)(k.prototype,"setup",[a],Object.getOwnPropertyDescriptor(k.prototype,"setup"),k.prototype),Object(G.a)(k.prototype,"prepare",[n],Object.getOwnPropertyDescriptor(k.prototype,"prepare"),k.prototype),Object(G.a)(k.prototype,"startRestocking",[o],Object.getOwnPropertyDescriptor(k.prototype,"startRestocking"),k.prototype),Object(G.a)(k.prototype,"startCleanup",[c],Object.getOwnPropertyDescriptor(k.prototype,"startCleanup"),k.prototype),Object(G.a)(k.prototype,"nextPhase",[s],Object.getOwnPropertyDescriptor(k.prototype,"nextPhase"),k.prototype),Object(G.a)(k.prototype,"startSale",[i],Object.getOwnPropertyDescriptor(k.prototype,"startSale"),k.prototype),Object(G.a)(k.prototype,"startCustomer",[u],Object.getOwnPropertyDescriptor(k.prototype,"startCustomer"),k.prototype),Object(G.a)(k.prototype,"advanceCustomer",[d],Object.getOwnPropertyDescriptor(k.prototype,"advanceCustomer"),k.prototype),Object(G.a)(k.prototype,"finishCustomer",[l],Object.getOwnPropertyDescriptor(k.prototype,"finishCustomer"),k.prototype),Object(G.a)(k.prototype,"buyStock",[m],Object.getOwnPropertyDescriptor(k.prototype,"buyStock"),k.prototype),Object(G.a)(k.prototype,"moveStock",[p],Object.getOwnPropertyDescriptor(k.prototype,"moveStock"),k.prototype),Object(G.a)(k.prototype,"purchase",[y],Object.getOwnPropertyDescriptor(k.prototype,"purchase"),k.prototype),Object(G.a)(k.prototype,"purchaseWithCoupon",[h],Object.getOwnPropertyDescriptor(k.prototype,"purchaseWithCoupon"),k.prototype),Object(G.a)(k.prototype,"impulseBuy",[f],Object.getOwnPropertyDescriptor(k.prototype,"impulseBuy"),k.prototype),Object(G.a)(k.prototype,"failCustomer",[b],Object.getOwnPropertyDescriptor(k.prototype,"failCustomer"),k.prototype),Object(G.a)(k.prototype,"undo",[v],Object.getOwnPropertyDescriptor(k.prototype,"undo"),k.prototype),k),F=g.a.createContext(new W),T=r(11);function q(e){return e&&"object"===typeof e&&!Array.isArray(e)}function K(e){var t=void 0;if(e instanceof Array){t=[];e.forEach((function(e){t.push(e)}))}else if(e instanceof String)t=e;else if("object"==typeof e)for(var r in t={},e)t[r]=e[r];return t}function $(e,t){var r=window.localStorage.getItem(e);null!==r&&function e(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];if(!a.length)return t;var o=a.shift();if(q(t)&&q(o))for(var c in o)q(o[c])?(t[c]||Object.assign(t,Object(T.a)({},c,{})),e(t[c],o[c])):(Object.isFrozen(t)&&(t=K(t)),Object.assign(t,Object(T.a)({},c,o[c])));return e.apply(void 0,[t].concat(a))}(t,JSON.parse(r));var a=Object(E.useState)(t),n=Object(S.a)(a,2),o=n[0],c=n[1];return[o,function(t){window.localStorage.setItem(e,JSON.stringify(t)),c(t)}]}var Y=r(37),L=function(e){return g.a.createElement("div",{className:"jumbotron d-flex flex-column mt-5 pb-2"},g.a.createElement("h1",{className:"display-4"},"Welcome to Supermarket Tycoon!"),g.a.createElement("div",{className:"d-flex flex-column"},g.a.createElement("p",{className:"lead"},"Supermarket Tycoon is a simple one-player game of inventory management with a dash of luck."),g.a.createElement("p",{className:"lead"},"Handle purchasing, make your customers happy, and control waste to become the..."),g.a.createElement("p",{className:"lead mx-auto font-weight-bold"},"Supermarket Tycoon!")),g.a.createElement("hr",{className:"my-4",style:{width:"100%"}}),g.a.createElement("div",{className:"d-flex justify-content-center"},g.a.createElement("a",{className:"btn btn-primary btn-lg mr-4",href:"/supermarket-tycoon/rules.pdf",role:"button"},"Download Rules"),g.a.createElement("a",{className:"btn btn-success btn-lg",style:{width:"200px"},href:"/game",role:"button"},"Play")),g.a.createElement("div",{className:"d-flex justify-content-center mt-5"},g.a.createElement("p",null,"Copyright James Pettit, 2020")),g.a.createElement("div",{className:"d-flex justify-content-center"},g.a.createElement("img",{className:Y.licenseIcon,src:"/supermarket-tycoon/by-nc-sa.svg",alt:"License - Creative Commons BY NC SA"})),g.a.createElement("div",{className:"d-flex justify-content-center mt-3"},g.a.createElement("p",null,"Supermarket Tycoon is a web-based implementation of Supermarch\xe9, Copyright Ryan Mayes, 2014")))},Z=function(e){var t=e.index,r=Object(E.useContext)(F);return g.a.createElement("div",{className:"card flex-grow-1 mx-4"},g.a.createElement("div",{className:"card-body d-flex flex-column"},g.a.createElement("h5",{className:"card-title"},"Customer ",t+1),g.a.createElement("div",{className:"d-flex align-items-center justify-content-around"},r.canStartCustomer(r.currentCustomers[t])&&g.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return r.startCustomer(t)}},"Start"),r.canStartRestocking()&&g.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return r.startRestocking(t)}},"Restock"))))},_=r(8),U=r(7),V=r(9),X=r.n(V),H=function(e){var t=e.item,r="".concat(D[t.dept]," $").concat(t.price);return t.coupon?g.a.createElement("span",{className:"badge badge-warning mx-1"},r):t.sale?g.a.createElement("span",{className:"badge badge-success mx-1"},r):g.a.createElement("span",{className:"badge badge-primary mx-1"},r)},Q=function(e){var t=e.customer,r=e.index,a=Object(E.useContext)(F);return g.a.createElement("div",{className:X()("card mx-4",{"shadow bg-white rounded":t.shopping})},g.a.createElement("div",{className:"card-body py-2"},g.a.createElement("div",{className:"d-flex justify-content-between"},g.a.createElement("h5",{className:"card-title"},t.name),Array(t.coupons).fill(0).map((function(e,t){return g.a.createElement("div",{key:t},g.a.createElement("span",{className:"badge badge-warning mx-2"},"Coupon"))})),t.bonus&&g.a.createElement("span",{className:"text-success"},"$",t.bonus),g.a.createElement("span",{className:"text-danger"},"$-",t.penalty)),g.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},g.a.createElement("div",{className:"d-flex"},t.impulseBuy&&g.a.createElement(H,{item:t.impulseBuy}),t.cart.map((function(e,t){return g.a.createElement(H,{key:t,item:e})}))),g.a.createElement("div",null,"/\xa0",t.cartSize)),g.a.createElement("div",{className:"card-text"},g.a.createElement("table",{className:"table table-sm"},g.a.createElement("tbody",null,Object.entries(t.demand).filter((function(e){var t=Object(S.a)(e,2);t[0];return t[1].length>0})).map((function(e){var r,n=Object(S.a)(e,2),o=n[0],c=n[1];return g.a.createElement("tr",{key:o},g.a.createElement("td",null,D[o]),g.a.createElement("td",null,(r=c,r.reduce((function(e,t){return e+J[t]}),0)).toFixed(0),"%"),g.a.createElement("td",null,a.canPurchase(t,o)&&g.a.createElement("button",{onClick:function(){return a.purchase()},className:X()("btn btn-sm",{"btn-primary":!a.departments[o].sale,"btn-success":a.departments[o].sale})},g.a.createElement(U.a,{icon:_.c})),c.includes(t.roll||0)&&a.mustFailCustomer(t)&&g.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:function(){return a.failCustomer()}},"Fail")),g.a.createElement("td",null,a.canPurchaseWithCoupon(t,o)&&g.a.createElement("button",{onClick:function(){return a.purchaseWithCoupon()},className:"btn btn-sm btn-warning"},g.a.createElement(U.a,{icon:_.c}))),g.a.createElement("td",null,a.canImpulseBuy(t,o)&&g.a.createElement("button",{onClick:function(){return a.impulseBuy(o)},className:"btn btn-sm btn-success"},g.a.createElement(U.a,{icon:_.c}))))}))))),g.a.createElement("div",{className:"d-flex justify-content-between"},a.canStartCustomer(t)&&g.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return a.startCustomer(r)}},"Start"),a.canAdvanceCustomer(t)&&g.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return a.advanceCustomer()}},"Next"),a.canFinishCustomer(t)&&g.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return a.finishCustomer()}},"Finish"),a.canStartRestocking()&&g.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return a.startRestocking(r)}},"Restock"))))},ee=r(45),te=function(e){var t=Object(E.useContext)(F);return g.a.createElement("div",{className:"d-flex form-inline bg-secondary text-white px-4"},g.a.createElement("div",{className:"m-2"},"Round: ",t.round),g.a.createElement("div",{className:"m-2"},"Cash: $",t.cash),g.a.createElement("div",{className:"d-flex align-items-center"},Object.entries({purchasing:"Purchasing",stocking:"Stocking",shopping1:"Shopping",restocking:"Restocking",shopping2:"Shopping",cleanup:"Cleanup"}).map((function(e,r,a){var n=Object(S.a)(e,2),o=n[0],c=n[1];return g.a.createElement("span",{key:r},g.a.createElement("span",{className:X()("m-2",Object(T.a)({},ee.underline,t.phase===o))},c),r!==a.length-1&&g.a.createElement(U.a,{icon:_.b}))})),(t.round<6||void 0!==t.phase)&&t.cash>=0&&g.a.createElement("button",{disabled:!t.canAdvancePhase(),className:"m-2 btn btn-primary btn-sm",onClick:function(){return t.nextPhase()}},"Next Phase")),g.a.createElement("div",{className:"ml-auto"},g.a.createElement("button",{disabled:!t.canUndo(),className:"m-2 btn btn-light btn-sm",onClick:function(){return t.undo()}},"Undo"),g.a.createElement("button",{className:"m-2 btn btn-warning btn-sm",onClick:function(){return t.setup()}},"New Game")))},re=function(){var e=Object(E.useContext)(F);return g.a.createElement("div",{className:"mx-4 mt-1"},g.a.createElement("div",{className:"d-flex justify-content-between"},g.a.createElement("h5",null,"Stock Room"),g.a.createElement("div",null,"Space in stock room: ",20-e.inStockRoom()," / 20")),g.a.createElement("div",{className:"card"},g.a.createElement("div",{className:"card-body"},g.a.createElement("table",{className:"table table-sm"},g.a.createElement("thead",null,g.a.createElement("tr",null,g.a.createElement("th",{scope:"col"},"Expiry"),Object.entries(D).map((function(e){var t=Object(S.a)(e,2),r=t[0],a=t[1];return g.a.createElement("th",{key:r},a)})))),g.a.createElement("tbody",null,g.a.createElement("tr",null,g.a.createElement("td",null),Object.keys(D).map((function(t){return g.a.createElement("td",{key:t},"$",e.currentCosts[t])}))),g.a.createElement("tr",null,g.a.createElement("td",null),Object.keys(D).map((function(t){return g.a.createElement("td",{key:t,style:{height:"40px"}},"purchasing"===e.phase&&g.a.createElement("button",{disabled:!e.canBuyStock(t),className:"btn btn-success btn-sm",onClick:function(){return e.buyStock(t)}},g.a.createElement(U.a,{icon:_.c})),["stocking","restocking"].includes(e.phase||"")&&g.a.createElement("button",{disabled:!e.canMoveStock(t),className:"btn btn-primary btn-sm",onClick:function(){return e.moveStock(t)}},g.a.createElement(U.a,{icon:_.a})))}))),M.filter((function(t){return"every"===t||("never"===t||parseInt(t)>=e.round)})).map((function(t){return g.a.createElement("tr",{key:t},g.a.createElement("td",null,t),Object.keys(D).map((function(r){return g.a.createElement("td",{key:r},g.a.createElement("span",{className:"d-flex align-items-center justify-content-center",style:{height:"31px"}},e.stockRoom[r]&&e.stockRoom[r][t]||0))})))})))))))},ae=function(e){var t=e.deptKey,r=e.dept,a=Object(E.useContext)(F);return g.a.createElement("div",{className:X()("card flex-grow-1 mx-3 mb-4",{"border border-danger":!a.hasStock(t)})},g.a.createElement("div",{className:"card-body d-flex flex-column py-2"},g.a.createElement("div",{className:"d-flex justify-content-center"},g.a.createElement("h5",null,D[t]),g.a.createElement("div",{className:"ml-auto"},"Price: $",r.sale?r.salePrice:r.price),g.a.createElement("div",{className:"mx-2"},r.sale?g.a.createElement("span",{className:"badge badge-success"},"Sale"):"stocking"===a.phase&&g.a.createElement("button",{onClick:function(){return a.startSale(t)},className:"btn btn-success btn-sm"},"Sale"))),g.a.createElement("table",{className:"table table-sm"},g.a.createElement("thead",null,g.a.createElement("tr",null,g.a.createElement("th",{scope:"col"},"Expiry"),g.a.createElement("th",null,"Stock"))),g.a.createElement("tbody",null,Object.entries(r.stock).filter((function(e){var t=Object(S.a)(e,2),r=t[0];t[1];return"every"===r||("never"===r||parseInt(r)>=a.round)})).map((function(e){var t=Object(S.a)(e,2),r=t[0],a=t[1];return g.a.createElement("tr",{key:r},g.a.createElement("td",null,r),g.a.createElement("td",null,a))}))))))},ne=function(e){var t=Object(E.useContext)(F);return g.a.createElement("div",{className:"d-flex flex-grow-1 flex-column mt-1"},g.a.createElement("div",{className:"d-flex justify-content-between"},g.a.createElement("h5",null,"Store"),g.a.createElement("div",null,"Space in store: ",15-t.inStore()," / 15")),g.a.createElement("div",{className:"d-flex flex-row"},g.a.createElement(ae,{deptKey:"bakery",dept:t.departments.bakery}),g.a.createElement(ae,{deptKey:"dairy",dept:t.departments.dairy}),g.a.createElement(ae,{deptKey:"dryGoods",dept:t.departments.dryGoods})),g.a.createElement("div",{className:"d-flex flex-row"},g.a.createElement(ae,{deptKey:"frozen",dept:t.departments.frozen}),g.a.createElement(ae,{deptKey:"produce",dept:t.departments.produce})))},oe=function(e){var t=Object(E.useContext)(F);return 6===t.round&&void 0===t.phase?g.a.createElement("div",{className:"d-flex justify-content-center align-items-center px-4 border border-success",style:{height:"47px"}},t.cash>=251&&g.a.createElement("span",null,g.a.createElement("span",{className:"font-weight-bold"},"Supermarket Tycoon!"),g.a.createElement("span",{className:"ml-4"},"Amazing!! Maybe it's time to think about opening a real store!")),t.cash>=201&&t.cash<251&&g.a.createElement("span",null,g.a.createElement("span",{className:"font-weight-bold"},"Master Grocer"),g.a.createElement("span",{className:"ml-4"},"Congratulations, You were born to be a grocer!")),t.cash>=151&&t.cash<200&&g.a.createElement("span",null,g.a.createElement("span",{className:"font-weight-bold"},"Grocery Manager"),g.a.createElement("span",{className:"ml-4"},"Good job - your customers are happy and you have money to expand")),t.cash>=101&&t.cash<150&&g.a.createElement("span",null,g.a.createElement("span",{className:"font-weight-bold"},"Grocer"),g.a.createElement("span",{className:"ml-4"},"Your store makes a tidy profit")),t.cash>=51&&t.cash<100&&g.a.createElement("span",null,g.a.createElement("span",{className:"font-weight-bold"},"Corner Store"),g.a.createElement("span",{className:"ml-4"},"Your store makes a small profit, but there's no margin for error")),t.cash>=0&&t.cash<50&&g.a.createElement("span",null,g.a.createElement("span",{className:"font-weight-bold"},"Breakeven"),g.a.createElement("span",{className:"ml-4"},"Don't quit your day job..."))):t.cash<0?g.a.createElement("div",{className:"d-flex justify-content-center align-items-center px-4 border border-danger",style:{height:"47px"}},g.a.createElement("span",{className:"font-weight-bold"},"Bankrupt!"),g.a.createElement("span",{className:"ml-4"},"You've angered your last customer and ran out of money!")):null};function ce(){var e=Object(E.useState)(0),t=Object(S.a)(e,2),r=t[0],a=t[1],n=$("AppState",new W),o=Object(S.a)(n,2),c=o[0],s=o[1];return c.setState=function(e){s(e),a(r+1)},window.app=c,g.a.createElement(x.a,null,g.a.createElement(O.c,null,g.a.createElement(O.a,{path:"/game"},g.a.createElement("div",{className:"d-flex flex-column",style:{width:"100%",maxWidth:"1400px",marginRight:"auto",marginLeft:"auto"}},g.a.createElement(F.Provider,{value:c},g.a.createElement(te,null),g.a.createElement(oe,null),g.a.createElement("div",{className:"d-flex flex-column flex-wrap"},g.a.createElement("div",{className:"d-flex flex-row flex-grow-1"},g.a.createElement(ne,null),g.a.createElement(re,null)),g.a.createElement("div",{className:"d-flex"},c.currentCustomers.map((function(e,t){return e.visible?g.a.createElement(Q,{key:t,customer:e,index:t}):g.a.createElement(Z,{key:t,index:t})}))))))),g.a.createElement(O.a,{path:"/"},g.a.createElement(L,null))))}C.a.render(g.a.createElement(g.a.StrictMode,null,g.a.createElement(ce,null)),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.d2eb0f4e.chunk.js.map