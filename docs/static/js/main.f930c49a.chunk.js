(this["webpackJsonpsupermarket-tycoon"]=this["webpackJsonpsupermarket-tycoon"]||[]).push([[0],{30:function(e,t,r){e.exports=r(49)},36:function(e,t,r){},37:function(e,t,r){var a=r(38);"string"===typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};r(21)(a,n);a.locals&&(e.exports=a.locals)},38:function(e,t,r){(t=r(20)(!1)).push([e.i,"\n  ._1qyj-fZ0q-xtCVquzyJpPF {\n    height: 50px;\n    margin: 0 4px 0 4px;\n  }\n",""]),t.locals={licenseIcon:"_1qyj-fZ0q-xtCVquzyJpPF"},e.exports=t},45:function(e,t,r){var a=r(46);"string"===typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};r(21)(a,n);a.locals&&(e.exports=a.locals)},46:function(e,t,r){(t=r(20)(!1)).push([e.i,"\n  ._3yWrz0X0-IjlWfvmG2JrT- {\n    text-decoration: underline;\n  }\n",""]),t.locals={underline:"_3yWrz0X0-IjlWfvmG2JrT-"},e.exports=t},49:function(e,t,r){"use strict";r.r(t);r(31);var a,n,o,c,s,i,u,d,l,p,m,y,h,f,b,k,v,E,g=r(0),z=r.n(g),S=r(23),C=r.n(S),x=(r(36),r(4)),O=r(28),j=r(2),G=r(24),N=r(25),w=r(3),P=r(29),I=r(26),R=[];function D(e){return function(t,r,a){var n=a.value;a.value=function(){var t=Array.from(arguments);this.setState(Object(I.a)(this,(function(r){var a=JSON.stringify(r);n.bind(r).apply(void 0,Object(P.a)(t));var o=JSON.stringify(r);e&&e.undoable&&(0===R.length||R[R.length-1]!==a)&&o!==a&&(R.push(a),R.length>100&&R.splice(0,R.length-100)),r.hasOwnProperty("notifyChange")&&r.notifyChange()})))}}}var M={bakery:"Bakery",dairy:"Dairy",dryGoods:"Dry Goods",frozen:"Frozen Foods",produce:"Produce"},A=["every","2","3","4","5","6","never"];function J(e){for(var t=e.length;0!==t;){var r=Math.floor(Math.random()*t),a=e[t-=1];e[t]=e[r],e[r]=a}}var B={2:2.78,3:5.56,4:8.33,5:11.11,6:13.89,7:16.67,8:13.89,9:11.11,10:8.33,11:5.56,12:2.78};var W={2:[6,7],3:[4,10],4:[5,9],5:[2,10],6:[4,12],7:[3,8],8:[7,12],9:[5,11],10:[6,11],11:[2,9],12:[3,9]},F=(a=D(),n=D(),o=D({undoable:!0}),c=D(),s=D(),i=D({undoable:!0}),u=D({undoable:!0}),d=D({undoable:!0}),l=D({undoable:!0}),p=D({undoable:!0}),m=D({undoable:!0}),y=D({undoable:!0}),h=D({undoable:!0}),f=D({undoable:!0}),b=D({undoable:!0}),k=D({undoable:!0}),v=D(),E=function(){function e(){Object(G.a)(this,e),this.setState=function(e){},this.notifyChange=function(){},this.cash=0,this.round=0,this.phase="purchasing",this.departments={bakery:{price:4,salePrice:3,sale:!1,stock:{2:3,3:0,4:0,5:0,6:0,never:0}},dairy:{price:4,salePrice:2,sale:!1,stock:{3:3,4:0,5:0,6:0,never:0}},dryGoods:{price:10,salePrice:7,sale:!1,stock:{4:3,5:0,6:0,never:0}},frozen:{price:7,salePrice:5,sale:!1,stock:{never:3}},produce:{price:3,salePrice:2,sale:!1,stock:{every:3}}},this.stockRoom={},this.customers=[{name:"Regina",coupons:1,penalty:4,cartSize:3,cart:[],demand:{frozen:[2,3,4],dairy:[5,6],produce:[7],bakery:[8,9],dryGoods:[10,11,12]}},{name:"Ryan",coupons:1,penalty:2,cartSize:2,cart:[],demand:{frozen:[6,7,8],dairy:[4,5],produce:[2,3],bakery:[11,12],dryGoods:[9,10]}},{name:"Rory",coupons:0,penalty:4,cartSize:1,cart:[],demand:{frozen:[],dairy:[6,7,8],produce:[9,10,11,12],bakery:[],dryGoods:[2,3,4,5]}},{name:"Dave",coupons:2,bonus:8,penalty:12,cartSize:4,cart:[],demand:{frozen:[11,12],dairy:[7],produce:[2,3,4],bakery:[5,6],dryGoods:[8,9,10]}},{name:"Lesley",coupons:0,penalty:5,cartSize:3,cart:[],demand:{frozen:[12],dairy:[3,4,5],produce:[6,7,8],bakery:[9,10,11],dryGoods:[2]}},{name:"Mo",coupons:0,penalty:3,cartSize:1,cart:[],demand:{frozen:[],dairy:[2,3],produce:[4,5,6,7],bakery:[8,9,10],dryGoods:[11,12]}},{name:"Amanda",coupons:0,penalty:5,cartSize:3,cart:[],demand:{frozen:[4,5,6],dairy:[],produce:[2,3],bakery:[10,11,12],dryGoods:[7,8,9]}},{name:"Scott",coupons:0,penalty:6,cartSize:2,cart:[],demand:{frozen:[],dairy:[7,8,9,10,11],produce:[3,4,5,6],bakery:[2],dryGoods:[12]}},{name:"Wendell",coupons:0,penalty:5,cartSize:1,cart:[],demand:{frozen:[2,3,4,5],dairy:[9,10,11,12],produce:[8],bakery:[7],dryGoods:[6]}},{name:"Diane",coupons:0,penalty:7,cartSize:4,cart:[],demand:{frozen:[11,12],dairy:[2,3],produce:[],bakery:[4,5,6,7,8,9,10],dryGoods:[]}},{name:"Gary",coupons:2,penalty:7,cartSize:4,cart:[],demand:{frozen:[11,2],dairy:[5,6],produce:[7,8],bakery:[9,10],dryGoods:[2,3,4]}},{name:"Margaret",coupons:0,penalty:3,cartSize:2,cart:[],demand:{frozen:[2,3,4],dairy:[7,8],produce:[5,6],bakery:[9,10],dryGoods:[11,12]}},{name:"Amy",coupons:0,bonus:10,penalty:15,cartSize:5,cart:[],demand:{frozen:[2,3,4],dairy:[12],produce:[7,8],bakery:[9,10,11],dryGoods:[5,6]}},{name:"Tiffany",coupons:1,penalty:3,cartSize:2,cart:[],demand:{frozen:[9,10,11,12],dairy:[8],produce:[7],bakery:[5,6],dryGoods:[2,3,4]}},{name:"Chris",coupons:1,penalty:9,cartSize:4,cart:[],demand:{frozen:[11,12],dairy:[2],produce:[3,4,5,6],bakery:[10],dryGoods:[7,8,9]}},{name:"George",coupons:1,penalty:8,cartSize:4,cart:[],demand:{frozen:[8,9,10,11,12],dairy:[],produce:[],bakery:[2,3,4,5,6,7],dryGoods:[]}},{name:"Mikolaj",coupons:1,penalty:4,cartSize:2,cart:[],demand:{frozen:[10,11,12],dairy:[2,3,4],produce:[],bakery:[7],dryGoods:[5,6]}},{name:"Rose",coupons:1,penalty:6,cartSize:3,cart:[],demand:{frozen:[6,7],dairy:[5],produce:[2,3,4],bakery:[11,12],dryGoods:[8,9,10]}},{name:"Stu",coupons:0,penalty:8,cartSize:2,cart:[],demand:{frozen:[2,3,4,5,6,7,8,9,10,11,12],dairy:[],produce:[],bakery:[],dryGoods:[]}},{name:"Melanie",coupons:0,penalty:5,cartSize:1,cart:[],demand:{frozen:[2,3],dairy:[8,9,10],produce:[11,12],bakery:[4],dryGoods:[5,6,7]}},{name:"Phil",coupons:2,penalty:10,cartSize:4,cart:[],demand:{frozen:[],dairy:[7,8,9],produce:[4,5,6],bakery:[10,11,12],dryGoods:[2,3]}},{name:"Zo\xeb",coupons:1,bonus:9,penalty:13,cartSize:5,cart:[],demand:{frozen:[2,3,4],dairy:[9,10],produce:[11,12],bakery:[5,6,7],dryGoods:[8]}},{name:"Chad",coupons:1,penalty:6,cartSize:3,cart:[],demand:{frozen:[9],dairy:[2,3],produce:[7,8],bakery:[4,5,6],dryGoods:[10,11,12]}},{name:"Albert",coupons:1,penalty:5,cartSize:3,cart:[],demand:{frozen:[11,12],dairy:[8,9,10],produce:[5,6],bakery:[7],dryGoods:[2,3,4]}},{name:"Jordan",coupons:0,penalty:8,cartSize:3,cart:[],demand:{frozen:[9],dairy:[2,3,4],produce:[5],bakery:[6,7,8],dryGoods:[10,11,12]}},{name:"Martha",coupons:1,penalty:6,cartSize:2,cart:[],demand:{frozen:[10,11,12],dairy:[8,9],produce:[6,7],bakery:[2,3,4,5],dryGoods:[]}},{name:"Jackie",coupons:2,penalty:9,cartSize:4,cart:[],demand:{frozen:[11,12],dairy:[7],produce:[4,5,6],bakery:[2,3],dryGoods:[8,9,10]}},{name:"Donna",coupons:0,penalty:8,cartSize:1,cart:[],demand:{frozen:[10,11,12],dairy:[8,9],produce:[5],bakery:[6,7],dryGoods:[2,3,4]}},{name:"Clara",coupons:1,penalty:7,cartSize:3,cart:[],demand:{frozen:[8],dairy:[5,6],produce:[9,10,11,12],bakery:[7],dryGoods:[2,3,4]}},{name:"Jacob",coupons:1,penalty:8,cartSize:4,cart:[],demand:{frozen:[6,7],dairy:[10,11,12],produce:[2,3,4],bakery:[5],dryGoods:[8,9]}}],this.costs=[{bakery:3,dairy:1,dryGoods:3,frozen:3,produce:2},{bakery:3,dairy:2,dryGoods:5,frozen:3,produce:1},{bakery:1,dairy:2,dryGoods:5,frozen:3,produce:3},{bakery:2,dairy:3,dryGoods:3,frozen:4,produce:1},{bakery:2,dairy:3,dryGoods:4,frozen:5,produce:1},{produce:1,bakery:2,dairy:2,dryGoods:6,frozen:4}],this.currentCustomers=[],this.currentCustomerIndex=void 0,this.currentCosts={bakery:0,dairy:0,dryGoods:0,frozen:0,produce:0},0===this.cash&&0===this.round&&this.setup()}return Object(N.a)(e,[{key:"setup",value:function(){var e=this;this.cash=15,this.round=0,this.phase="purchasing",this.departments={bakery:{price:4,salePrice:3,sale:!1,stock:{2:3,3:0,4:0,5:0,6:0,never:0}},dairy:{price:4,salePrice:2,sale:!1,stock:{3:3,4:0,5:0,6:0,never:0}},dryGoods:{price:10,salePrice:7,sale:!1,stock:{4:3,5:0,6:0,never:0}},frozen:{price:7,salePrice:5,sale:!1,stock:{never:3}},produce:{price:3,salePrice:2,sale:!1,stock:{every:3}}},this.stockRoom={},Object.keys(M).forEach((function(t){e.stockRoom[t]={every:0,2:0,3:0,4:0,5:0,6:0,never:0}})),this.customers=[{name:"Regina",coupons:1,penalty:4,cartSize:3,cart:[],demand:{frozen:[2,3,4],dairy:[5,6],produce:[7],bakery:[8,9],dryGoods:[10,11,12]}},{name:"Ryan",coupons:1,penalty:2,cartSize:2,cart:[],demand:{frozen:[6,7,8],dairy:[4,5],produce:[2,3],bakery:[11,12],dryGoods:[9,10]}},{name:"Rory",coupons:0,penalty:4,cartSize:1,cart:[],demand:{frozen:[],dairy:[6,7,8],produce:[9,10,11,12],bakery:[],dryGoods:[2,3,4,5]}},{name:"Dave",coupons:2,bonus:8,penalty:12,cartSize:4,cart:[],demand:{frozen:[11,12],dairy:[7],produce:[2,3,4],bakery:[5,6],dryGoods:[8,9,10]}},{name:"Lesley",coupons:0,penalty:5,cartSize:3,cart:[],demand:{frozen:[12],dairy:[3,4,5],produce:[6,7,8],bakery:[9,10,11],dryGoods:[2]}},{name:"Mo",coupons:0,penalty:3,cartSize:1,cart:[],demand:{frozen:[],dairy:[2,3],produce:[4,5,6,7],bakery:[8,9,10],dryGoods:[11,12]}},{name:"Amanda",coupons:0,penalty:5,cartSize:3,cart:[],demand:{frozen:[4,5,6],dairy:[],produce:[2,3],bakery:[10,11,12],dryGoods:[7,8,9]}},{name:"Scott",coupons:0,penalty:6,cartSize:2,cart:[],demand:{frozen:[],dairy:[7,8,9,10,11],produce:[3,4,5,6],bakery:[2],dryGoods:[12]}},{name:"Wendell",coupons:0,penalty:5,cartSize:1,cart:[],demand:{frozen:[2,3,4,5],dairy:[9,10,11,12],produce:[8],bakery:[7],dryGoods:[6]}},{name:"Diane",coupons:0,penalty:7,cartSize:4,cart:[],demand:{frozen:[11,12],dairy:[2,3],produce:[],bakery:[4,5,6,7,8,9,10],dryGoods:[]}},{name:"Gary",coupons:2,penalty:7,cartSize:4,cart:[],demand:{frozen:[11,2],dairy:[5,6],produce:[7,8],bakery:[9,10],dryGoods:[2,3,4]}},{name:"Margaret",coupons:0,penalty:3,cartSize:2,cart:[],demand:{frozen:[2,3,4],dairy:[7,8],produce:[5,6],bakery:[9,10],dryGoods:[11,12]}},{name:"Amy",coupons:0,bonus:10,penalty:15,cartSize:5,cart:[],demand:{frozen:[2,3,4],dairy:[12],produce:[7,8],bakery:[9,10,11],dryGoods:[5,6]}},{name:"Tiffany",coupons:1,penalty:3,cartSize:2,cart:[],demand:{frozen:[9,10,11,12],dairy:[8],produce:[7],bakery:[5,6],dryGoods:[2,3,4]}},{name:"Chris",coupons:1,penalty:9,cartSize:4,cart:[],demand:{frozen:[11,12],dairy:[2],produce:[3,4,5,6],bakery:[10],dryGoods:[7,8,9]}},{name:"George",coupons:1,penalty:8,cartSize:4,cart:[],demand:{frozen:[8,9,10,11,12],dairy:[],produce:[],bakery:[2,3,4,5,6,7],dryGoods:[]}},{name:"Mikolaj",coupons:1,penalty:4,cartSize:2,cart:[],demand:{frozen:[10,11,12],dairy:[2,3,4],produce:[],bakery:[7],dryGoods:[5,6]}},{name:"Rose",coupons:1,penalty:6,cartSize:3,cart:[],demand:{frozen:[6,7],dairy:[5],produce:[2,3,4],bakery:[11,12],dryGoods:[8,9,10]}},{name:"Stu",coupons:0,penalty:8,cartSize:2,cart:[],demand:{frozen:[2,3,4,5,6,7,8,9,10,11,12],dairy:[],produce:[],bakery:[],dryGoods:[]}},{name:"Melanie",coupons:0,penalty:5,cartSize:1,cart:[],demand:{frozen:[2,3],dairy:[8,9,10],produce:[11,12],bakery:[4],dryGoods:[5,6,7]}},{name:"Phil",coupons:2,penalty:10,cartSize:4,cart:[],demand:{frozen:[],dairy:[7,8,9],produce:[4,5,6],bakery:[10,11,12],dryGoods:[2,3]}},{name:"Zo\xeb",coupons:1,bonus:9,penalty:13,cartSize:5,cart:[],demand:{frozen:[2,3,4],dairy:[9,10],produce:[11,12],bakery:[5,6,7],dryGoods:[8]}},{name:"Chad",coupons:1,penalty:6,cartSize:3,cart:[],demand:{frozen:[9],dairy:[2,3],produce:[7,8],bakery:[4,5,6],dryGoods:[10,11,12]}},{name:"Albert",coupons:1,penalty:5,cartSize:3,cart:[],demand:{frozen:[11,12],dairy:[8,9,10],produce:[5,6],bakery:[7],dryGoods:[2,3,4]}},{name:"Jordan",coupons:0,penalty:8,cartSize:3,cart:[],demand:{frozen:[9],dairy:[2,3,4],produce:[5],bakery:[6,7,8],dryGoods:[10,11,12]}},{name:"Martha",coupons:1,penalty:6,cartSize:2,cart:[],demand:{frozen:[10,11,12],dairy:[8,9],produce:[6,7],bakery:[2,3,4,5],dryGoods:[]}},{name:"Jackie",coupons:2,penalty:9,cartSize:4,cart:[],demand:{frozen:[11,12],dairy:[7],produce:[4,5,6],bakery:[2,3],dryGoods:[8,9,10]}},{name:"Donna",coupons:0,penalty:8,cartSize:1,cart:[],demand:{frozen:[10,11,12],dairy:[8,9],produce:[5],bakery:[6,7],dryGoods:[2,3,4]}},{name:"Clara",coupons:1,penalty:7,cartSize:3,cart:[],demand:{frozen:[8],dairy:[5,6],produce:[9,10,11,12],bakery:[7],dryGoods:[2,3,4]}},{name:"Jacob",coupons:1,penalty:8,cartSize:4,cart:[],demand:{frozen:[6,7],dairy:[10,11,12],produce:[2,3,4],bakery:[5],dryGoods:[8,9]}}],this.costs=[{bakery:3,dairy:1,dryGoods:3,frozen:3,produce:2},{bakery:3,dairy:2,dryGoods:5,frozen:3,produce:1},{bakery:1,dairy:2,dryGoods:5,frozen:3,produce:3},{bakery:2,dairy:3,dryGoods:3,frozen:4,produce:1},{bakery:2,dairy:3,dryGoods:4,frozen:5,produce:1},{produce:1,bakery:2,dairy:2,dryGoods:6,frozen:4}],J(this.customers),J(this.costs),this.currentCustomers=[],this.currentCosts={bakery:0,dairy:0,dryGoods:0,frozen:0,produce:0},this.currentCustomerIndex=void 0,this.prepare()}},{key:"prepare",value:function(){this.round++;for(var e=0;e<5;e++){var t=this.customers.pop();if(!t)throw new Error("ran out of customers");e<2&&(t.visible=!0),this.currentCustomers.push(t)}var r=this.costs.pop();if(!r)throw new Error("ran out of costs");this.currentCosts=r,this.currentCustomerIndex=void 0}},{key:"startRestocking",value:function(e){if(this.phase="restocking",void 0===this.currentCustomerIndex)this.currentCustomers.slice(e,1);else if(this.currentCustomerIndex===e){var t=this.currentCustomers[this.currentCustomerIndex];this.cash-=t.penalty,t.roll=void 0,this.currentCustomers[this.currentCustomerIndex].shopping=!1,this.currentCustomers.splice(this.currentCustomerIndex,1),this.currentCustomerIndex=void 0}}},{key:"startCleanup",value:function(){var e=this;this.currentCustomers=[],this.currentCustomerIndex=void 0,Object.values(this.departments).forEach((function(t){e.round in t.stock&&(e.cash-=t.stock[e.round],t.stock[e.round]=0),"every"in t.stock&&(e.cash-=t.stock.every,t.stock.every=0)})),Object.values(this.stockRoom).forEach((function(t){e.round in t&&(e.cash-=t[e.round],t[e.round]=0),"every"in t&&(e.cash-=t.every,t.every=0)}))}},{key:"endGame",value:function(){}},{key:"nextPhase",value:function(){if(void 0===this.phase)return this.phase="purchasing",void this.prepare();if("purchasing"!==this.phase)if("stocking"!==this.phase){if("shopping1"===this.phase||"shopping2"===this.phase)return this.phase="cleanup",void this.startCleanup();if("restocking"!==this.phase)return"cleanup"===this.phase?6===this.round?(this.phase=void 0,void this.endGame()):(this.phase="purchasing",void this.prepare()):void 0;this.phase="shopping2"}else this.phase="shopping1";else this.phase="stocking"}},{key:"startSale",value:function(e){this.departments[e].sale=!0}},{key:"startCustomer",value:function(e){this.currentCustomers[e].visible=!0,this.currentCustomers[e].shopping=!0,this.currentCustomerIndex=e,this.advanceCustomer()}},{key:"advanceCustomer",value:function(){if(void 0===this.currentCustomerIndex)throw new Error("no customer");this.currentCustomers[this.currentCustomerIndex].roll=Math.floor(6*Math.random())+1+(Math.floor(6*Math.random())+1)}},{key:"finishCustomer",value:function(){if(void 0===this.currentCustomerIndex)throw new Error("no customer");var e=this.currentCustomers[this.currentCustomerIndex];e.bonus&&(this.cash-=e.bonus),e.shopping=!1,this.currentCustomers.splice(this.currentCustomerIndex,1),this.currentCustomerIndex=void 0}},{key:"buyStock",value:function(e){this.cash-=this.currentCosts[e],this.stockRoom[e][this.expiration(e)]++}},{key:"moveStock",value:function(e){for(var t,r=0;r<A.length;r++){var a=A[r];if(this.stockRoom[e][a]){this.stockRoom[e][a]--,t=a;break}}t&&this.departments[e].stock[t]++}},{key:"removeOldestItem",value:function(e){for(var t=0;t<A.length;t++){var r=A[t];if(this.departments[e].stock[r])return this.departments[e].stock[r]--,!0}return!1}},{key:"purchase",value:function(){var e=this;if(void 0===this.currentCustomerIndex)throw new Error("no customer");var t=this.currentCustomers[this.currentCustomerIndex],r=t.roll;if(void 0===r)throw new Error("cannot purchase without roll");var a=Object.keys(t.demand).find((function(e){return t.demand[e].includes(r)}));if(void 0===a)throw new Error("".concat(r," not found for ").concat(t.name));if(this.departments[a].sale){var n=W[r],o=Object.keys(t.demand).filter((function(e){return n.find((function(r){return t.demand[e].includes(r)}))}));o.forEach((function(t){return e.removeOldestItem(t)})),o.forEach((function(r){return t.cart.push({dept:r,price:e.price(r),coupon:!1,sale:e.departments[r].sale})})),o.forEach((function(t){return e.cash+=e.price(t)}))}this.removeOldestItem(a),t.cart.push({dept:a,price:this.price(a),coupon:!1,sale:this.departments[a].sale}),this.cash+=this.price(a),t.roll=void 0}},{key:"purchaseWithCoupon",value:function(){var e=this;if(void 0===this.currentCustomerIndex)throw new Error("no customer");var t=this.currentCustomers[this.currentCustomerIndex];if(void 0===t.roll)throw new Error("cannot purchase without roll");var r=W[t.roll],a=Object.keys(t.demand).filter((function(e){return r.find((function(r){return t.demand[e].includes(r)}))}));void 0===a[1]&&(a[1]=a[0]),a.forEach((function(t){return e.removeOldestItem(t)})),a.forEach((function(r){return t.cart.push({dept:r,price:e.price(r)-1,coupon:!0,sale:!1})})),a.forEach((function(t){e.cash+=e.price(t)-1})),t.coupons--,t.roll=void 0}},{key:"impulseBuy",value:function(e){if(void 0===this.currentCustomerIndex)throw new Error("no customer");var t=this.currentCustomers[this.currentCustomerIndex];this.removeOldestItem(e),this.cash+=this.price(e),t.impulseBuy={dept:e,price:this.price(e),coupon:!1,sale:!0}}},{key:"failCustomer",value:function(){var e=this;if(void 0===this.currentCustomerIndex)throw new Error("no customer");var t=this.currentCustomers[this.currentCustomerIndex];t.cart.forEach((function(t){e.cash-=t.price})),this.cash-=t.penalty,t.cartSize=0,t.roll=void 0,this.currentCustomers[this.currentCustomerIndex].shopping=!1,this.currentCustomers.splice(this.currentCustomerIndex,1),this.currentCustomerIndex=void 0}},{key:"undo",value:function(){if(0!==R.length){var e=R.pop();e&&Object.assign(this,JSON.parse(e))}}},{key:"canStartCustomer",value:function(e){return["shopping1","shopping2"].includes(this.phase||"")&&!e.shopping&&void 0===this.currentCustomerIndex}},{key:"canAdvanceCustomer",value:function(e){return e.shopping&&!e.roll&&e.cart.length<e.cartSize}},{key:"canFinishCustomer",value:function(e){return e.shopping&&!e.roll&&e.cart.length>=e.cartSize}},{key:"mustFailCustomer",value:function(e){return e.shopping&&e.roll&&this.cannotPurchase(e)}},{key:"cannotPurchase",value:function(e){var t=this;return void 0===Object.keys(M).find((function(r){return t.canPurchase(e,r)}))}},{key:"canPurchase",value:function(e,t){if(!e.roll)return!1;if(!e.demand[t].includes(e.roll))return!1;if(!this.hasStock(t))return!1;if(e.cart.length>=e.cartSize)return!1;if(this.departments[t].sale){var r=W[e.roll],a=Object.keys(e.demand).filter((function(t){return r.find((function(r){return e.demand[t].includes(r)}))})),n=Object(x.a)(a,2),o=n[0],c=n[1];return this.hasStock(o)&&this.hasStock(c)}return!0}},{key:"canPurchaseWithCoupon",value:function(e,t){if(void 0===e.roll)return!1;if(0===e.coupons)return!1;if(e.cart.length+2>e.cartSize)return!1;var r=W[e.roll],a=Object.keys(e.demand).filter((function(t){return r.find((function(r){return e.demand[t].includes(r)}))})),n=Object(x.a)(a,2),o=n[0],c=n[1];return void 0===c?o===t&&this.hasStock(o,2):(o===t||c===t)&&this.hasStock(o)&&this.hasStock(c)}},{key:"canImpulseBuy",value:function(e,t){return!!e.shopping&&(!!this.departments[t].sale&&(!(e.cart.length>=e.cartSize)&&(!!this.hasStock(t)&&(!(e.cart.length>0)&&(void 0===e.roll&&void 0===e.impulseBuy)))))}},{key:"hasStock",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object.values(this.departments[e].stock).reduce((function(e,t){return e+t}),0)>=t}},{key:"price",value:function(e){return this.departments[e].sale?this.departments[e].salePrice:this.departments[e].price}},{key:"inStore",value:function(){return Object.values(this.departments).reduce((function(e,t){return e+Object.values(t.stock).reduce((function(e,t){return e+t}),0)}),0)}},{key:"inStockRoom",value:function(){return Object.values(this.stockRoom).reduce((function(e,t){return e+Object.values(t).reduce((function(e,t){return e+t}),0)}),0)}},{key:"canBuyStock",value:function(e){return this.cash>=this.currentCosts[e]&&this.inStockRoom()<20}},{key:"canMoveStock",value:function(e){return Object.values(this.stockRoom[e]).reduce((function(e,t){return e+t}),0)>0&&this.inStore()<15}},{key:"canStartRestocking",value:function(){return"shopping1"===this.phase&&(void 0===this.currentCustomerIndex||this.canAdvanceCustomer(this.currentCustomers[this.currentCustomerIndex]))}},{key:"canAdvancePhase",value:function(){return!(["shopping1","shopping2"].includes(this.phase||"")&&this.currentCustomers.length>0)}},{key:"canUndo",value:function(){return R.length>0}},{key:"expiration",value:function(e){switch(e){case"produce":return"every";case"bakery":return this.round+2;case"dairy":return this.round+3;case"dryGoods":return this.round+4;case"frozen":return"never"}return NaN}}]),e}(),Object(w.a)(E.prototype,"setup",[a],Object.getOwnPropertyDescriptor(E.prototype,"setup"),E.prototype),Object(w.a)(E.prototype,"prepare",[n],Object.getOwnPropertyDescriptor(E.prototype,"prepare"),E.prototype),Object(w.a)(E.prototype,"startRestocking",[o],Object.getOwnPropertyDescriptor(E.prototype,"startRestocking"),E.prototype),Object(w.a)(E.prototype,"startCleanup",[c],Object.getOwnPropertyDescriptor(E.prototype,"startCleanup"),E.prototype),Object(w.a)(E.prototype,"endGame",[s],Object.getOwnPropertyDescriptor(E.prototype,"endGame"),E.prototype),Object(w.a)(E.prototype,"nextPhase",[i],Object.getOwnPropertyDescriptor(E.prototype,"nextPhase"),E.prototype),Object(w.a)(E.prototype,"startSale",[u],Object.getOwnPropertyDescriptor(E.prototype,"startSale"),E.prototype),Object(w.a)(E.prototype,"startCustomer",[d],Object.getOwnPropertyDescriptor(E.prototype,"startCustomer"),E.prototype),Object(w.a)(E.prototype,"advanceCustomer",[l],Object.getOwnPropertyDescriptor(E.prototype,"advanceCustomer"),E.prototype),Object(w.a)(E.prototype,"finishCustomer",[p],Object.getOwnPropertyDescriptor(E.prototype,"finishCustomer"),E.prototype),Object(w.a)(E.prototype,"buyStock",[m],Object.getOwnPropertyDescriptor(E.prototype,"buyStock"),E.prototype),Object(w.a)(E.prototype,"moveStock",[y],Object.getOwnPropertyDescriptor(E.prototype,"moveStock"),E.prototype),Object(w.a)(E.prototype,"purchase",[h],Object.getOwnPropertyDescriptor(E.prototype,"purchase"),E.prototype),Object(w.a)(E.prototype,"purchaseWithCoupon",[f],Object.getOwnPropertyDescriptor(E.prototype,"purchaseWithCoupon"),E.prototype),Object(w.a)(E.prototype,"impulseBuy",[b],Object.getOwnPropertyDescriptor(E.prototype,"impulseBuy"),E.prototype),Object(w.a)(E.prototype,"failCustomer",[k],Object.getOwnPropertyDescriptor(E.prototype,"failCustomer"),E.prototype),Object(w.a)(E.prototype,"undo",[v],Object.getOwnPropertyDescriptor(E.prototype,"undo"),E.prototype),E),T=z.a.createContext(new F),q=r(11);function K(e){return e&&"object"===typeof e&&!Array.isArray(e)}function $(e){var t=void 0;if(e instanceof Array){t=[];e.forEach((function(e){t.push(e)}))}else if(e instanceof String)t=e;else if("object"==typeof e)for(var r in t={},e)t[r]=e[r];return t}function L(e,t){var r=window.localStorage.getItem(e);null!==r&&function e(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];if(!a.length)return t;var o=a.shift();if(K(t)&&K(o))for(var c in o)K(o[c])?(t[c]||Object.assign(t,Object(q.a)({},c,{})),e(t[c],o[c])):(Object.isFrozen(t)&&(t=$(t)),Object.assign(t,Object(q.a)({},c,o[c])));return e.apply(void 0,[t].concat(a))}(t,JSON.parse(r));var a=Object(g.useState)(t),n=Object(x.a)(a,2),o=n[0],c=n[1];return[o,function(t){window.localStorage.setItem(e,JSON.stringify(t)),c(t)}]}var Z=r(37),_=function(e){return z.a.createElement("div",{className:"jumbotron d-flex flex-column mt-5 pb-2"},z.a.createElement("h1",{className:"display-4"},"Welcome to Supermarket Tycoon!"),z.a.createElement("div",{className:"d-flex flex-column"},z.a.createElement("p",{className:"lead"},"Supermarket Tycoon is a simple one-player game of inventory management with a dash of luck."),z.a.createElement("p",{className:"lead"},"Handle purchasing, make your customers happy, and control waste to become the..."),z.a.createElement("p",{className:"lead mx-auto font-weight-bold"},"Supermarket Tycoon!")),z.a.createElement("hr",{className:"my-4",style:{width:"100%"}}),z.a.createElement("div",{className:"d-flex justify-content-center"},z.a.createElement("a",{className:"btn btn-primary btn-lg mr-4",href:"/supermarket-tycoon/rules.pdf",role:"button"},"Download Rules"),z.a.createElement("a",{className:"btn btn-success btn-lg",style:{width:"200px"},href:"/game",role:"button"},"Play")),z.a.createElement("div",{className:"d-flex justify-content-center mt-5"},z.a.createElement("p",null,"Copyright James Pettit, 2020")),z.a.createElement("div",{className:"d-flex justify-content-center"},z.a.createElement("img",{className:Z.licenseIcon,src:"/supermarket-tycoon/by-nc-sa.svg",alt:"License - Creative Commons BY NC SA"})),z.a.createElement("div",{className:"d-flex justify-content-center mt-3"},z.a.createElement("p",null,"Supermarket Tycoon is a web-based implementation of Supermarch\xe9, Copyright Ryan Mayes, 2014")))},U=function(e){var t=e.index,r=Object(g.useContext)(T);return z.a.createElement("div",{className:"card flex-grow-1 mx-4"},z.a.createElement("div",{className:"card-body d-flex flex-column"},z.a.createElement("h5",{className:"card-title"},"Customer ",t+1),z.a.createElement("div",{className:"d-flex align-items-center justify-content-around"},r.canStartCustomer(r.currentCustomers[t])&&z.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return r.startCustomer(t)}},"Start"),r.canStartRestocking()&&z.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return r.startRestocking(t)}},"Restock"))))},V=r(8),X=r(7),H=r(9),Y=r.n(H),Q=function(e){var t=e.item,r="".concat(M[t.dept]," $").concat(t.price);return t.coupon?z.a.createElement("span",{className:"badge badge-warning mx-1"},r):t.sale?z.a.createElement("span",{className:"badge badge-success mx-1"},r):z.a.createElement("span",{className:"badge badge-primary mx-1"},r)},ee=function(e){var t=e.customer,r=e.index,a=Object(g.useContext)(T);return z.a.createElement("div",{className:Y()("card mx-4",{"shadow bg-white rounded":t.shopping})},z.a.createElement("div",{className:"card-body py-2"},z.a.createElement("div",{className:"d-flex justify-content-between"},z.a.createElement("h5",{className:"card-title"},t.name),Array(t.coupons).fill(0).map((function(e,t){return z.a.createElement("div",{key:t},z.a.createElement("span",{className:"badge badge-warning mx-2"},"Coupon"))})),t.bonus&&z.a.createElement("span",{className:"text-success"},"$",t.bonus),z.a.createElement("span",{className:"text-danger"},"$-",t.penalty)),z.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},z.a.createElement("div",{className:"d-flex"},t.impulseBuy&&z.a.createElement(Q,{item:t.impulseBuy}),t.cart.map((function(e){return z.a.createElement(Q,{item:e})}))),z.a.createElement("div",null,"/\xa0",t.cartSize)),z.a.createElement("div",{className:"card-text"},z.a.createElement("table",{className:"table table-sm"},z.a.createElement("tbody",null,Object.entries(t.demand).filter((function(e){var t=Object(x.a)(e,2);t[0];return t[1].length>0})).map((function(e){var r,n=Object(x.a)(e,2),o=n[0],c=n[1];return z.a.createElement("tr",{key:o},z.a.createElement("td",null,M[o]),z.a.createElement("td",null,(r=c,r.reduce((function(e,t){return e+B[t]}),0)).toFixed(0),"%"),z.a.createElement("td",null,a.canPurchase(t,o)&&z.a.createElement("button",{onClick:function(){return a.purchase()},className:Y()("btn btn-sm",{"btn-primary":!a.departments[o].sale,"btn-success":a.departments[o].sale})},z.a.createElement(X.a,{icon:V.c}))),z.a.createElement("td",null,a.canPurchaseWithCoupon(t,o)&&z.a.createElement("button",{onClick:function(){return a.purchaseWithCoupon()},className:"btn btn-sm btn-warning"},z.a.createElement(X.a,{icon:V.c}))),z.a.createElement("td",null,a.canImpulseBuy(t,o)&&z.a.createElement("button",{onClick:function(){return a.impulseBuy(o)},className:"btn btn-sm btn-success"},z.a.createElement(X.a,{icon:V.c}))))}))))),z.a.createElement("div",{className:"d-flex justify-content-between"},a.canStartCustomer(t)&&z.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return a.startCustomer(r)}},"Start"),a.canAdvanceCustomer(t)&&z.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return a.advanceCustomer()}},"Next"),a.canFinishCustomer(t)&&z.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return a.finishCustomer()}},"Finish"),a.mustFailCustomer(t)&&z.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:function(){return a.failCustomer()}},"Fail"),a.canStartRestocking()&&z.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return a.startRestocking(r)}},"Restock"))))},te=r(45),re=function(e){var t=Object(g.useContext)(T);return z.a.createElement("div",{className:"d-flex form-inline bg-secondary text-white px-4"},z.a.createElement("div",{className:"m-2"},"Round: ",t.round),z.a.createElement("div",{className:"m-2"},"Cash: $",t.cash),z.a.createElement("div",{className:"d-flex align-items-center"},Object.entries({purchasing:"Purchasing",stocking:"Stocking",shopping1:"Shopping",restocking:"Restocking",shopping2:"Shopping",cleanup:"Cleanup"}).map((function(e,r,a){var n=Object(x.a)(e,2),o=n[0],c=n[1];return z.a.createElement("span",{key:r},z.a.createElement("span",{className:Y()("m-2",Object(q.a)({},te.underline,t.phase===o))},c),r!==a.length-1&&z.a.createElement(X.a,{icon:V.b}))})),z.a.createElement("button",{disabled:!t.canAdvancePhase(),className:"m-2 btn btn-primary btn-sm",onClick:function(){return t.nextPhase()}},"Next Phase")),z.a.createElement("div",{className:"ml-auto"},z.a.createElement("button",{disabled:!t.canUndo(),className:"m-2 btn btn-light btn-sm",onClick:function(){return t.undo()}},"Undo"),z.a.createElement("button",{className:"m-2 btn btn-warning btn-sm",onClick:function(){return t.setup()}},"New Game")))},ae=function(){var e=Object(g.useContext)(T);return z.a.createElement("div",{className:"mx-4 mt-1"},z.a.createElement("div",{className:"d-flex justify-content-between"},z.a.createElement("h5",null,"Stock Room"),z.a.createElement("div",null,"Space in stock room: ",20-e.inStockRoom()," / 20")),z.a.createElement("div",{className:"card"},z.a.createElement("div",{className:"card-body"},z.a.createElement("table",{className:"table table-sm"},z.a.createElement("thead",null,z.a.createElement("tr",null,z.a.createElement("th",{scope:"col"},"Expiry"),Object.entries(M).map((function(e){var t=Object(x.a)(e,2),r=t[0],a=t[1];return z.a.createElement("th",{key:r},a)})))),z.a.createElement("tbody",null,z.a.createElement("tr",null,z.a.createElement("td",null),Object.keys(M).map((function(t){return z.a.createElement("td",{key:t},"$",e.currentCosts[t])}))),z.a.createElement("tr",null,z.a.createElement("td",null),Object.keys(M).map((function(t){return z.a.createElement("td",{key:t,style:{height:"40px"}},"purchasing"===e.phase&&z.a.createElement("button",{disabled:!e.canBuyStock(t),className:"btn btn-success btn-sm",onClick:function(){return e.buyStock(t)}},z.a.createElement(X.a,{icon:V.c})),["stocking","restocking"].includes(e.phase||"")&&z.a.createElement("button",{disabled:!e.canMoveStock(t),className:"btn btn-primary btn-sm",onClick:function(){return e.moveStock(t)}},z.a.createElement(X.a,{icon:V.a})))}))),A.map((function(t){return z.a.createElement("tr",{key:t},z.a.createElement("td",null,t),Object.keys(M).map((function(r){return z.a.createElement("td",{key:r},z.a.createElement("span",{className:"d-flex align-items-center justify-content-center",style:{height:"31px"}},e.stockRoom[r]&&e.stockRoom[r][t]||0))})))})))))))},ne=function(e){var t=e.deptKey,r=e.dept,a=Object(g.useContext)(T);return z.a.createElement("div",{className:"card flex-grow-1 mx-3 mb-4"},z.a.createElement("div",{className:"card-body d-flex flex-column py-2"},z.a.createElement("div",{className:"d-flex justify-content-center"},z.a.createElement("h5",null,M[t]),z.a.createElement("div",{className:"ml-auto"},"Price: $",r.sale?r.salePrice:r.price),z.a.createElement("div",{className:"mx-2"},r.sale?z.a.createElement("span",{className:"badge badge-success"},"Sale"):"stocking"===a.phase&&z.a.createElement("button",{onClick:function(){return a.startSale(t)},className:"btn btn-success btn-sm"},"Sale"))),z.a.createElement("table",{className:"table table-sm"},z.a.createElement("thead",null,z.a.createElement("tr",null,z.a.createElement("th",{scope:"col"},"Expiry"),z.a.createElement("th",null,"Stock"))),z.a.createElement("tbody",null,Object.entries(r.stock).map((function(e){var t=Object(x.a)(e,2),r=t[0],n=t[1];return z.a.createElement("tr",{key:r,className:Y()({"bg-danger":"every"===r||r===a.round.toString(),"bg-warning":r===(a.round+1).toString()})},z.a.createElement("td",null,r),z.a.createElement("td",null,n))}))))))},oe=function(e){var t=Object(g.useContext)(T);return z.a.createElement("div",{className:"d-flex flex-grow-1 flex-column mt-1"},z.a.createElement("div",{className:"d-flex justify-content-between"},z.a.createElement("h5",null,"Store"),z.a.createElement("div",null,"Space in store: ",15-t.inStore()," / 15")),z.a.createElement("div",{className:"d-flex flex-row"},z.a.createElement(ne,{deptKey:"bakery",dept:t.departments.bakery}),z.a.createElement(ne,{deptKey:"dairy",dept:t.departments.dairy}),z.a.createElement(ne,{deptKey:"dryGoods",dept:t.departments.dryGoods})),z.a.createElement("div",{className:"d-flex flex-row"},z.a.createElement(ne,{deptKey:"frozen",dept:t.departments.frozen}),z.a.createElement(ne,{deptKey:"produce",dept:t.departments.produce})))};function ce(){var e=Object(g.useState)(0),t=Object(x.a)(e,2),r=t[0],a=t[1],n=L("AppState",new F),o=Object(x.a)(n,2),c=o[0],s=o[1];return c.setState=function(e){s(e),a(r+1)},window.app=c,z.a.createElement(O.a,null,z.a.createElement(j.c,null,z.a.createElement(j.a,{path:"/game"},z.a.createElement("div",{className:"d-flex flex-column",style:{width:"100%",maxWidth:"1400px",marginRight:"auto",marginLeft:"auto"}},z.a.createElement(T.Provider,{value:c},z.a.createElement(re,null),z.a.createElement("div",{className:"d-flex flex-column flex-wrap"},z.a.createElement("div",{className:"d-flex flex-row flex-grow-1"},z.a.createElement(oe,null),z.a.createElement(ae,null)),z.a.createElement("div",{className:"d-flex"},c.currentCustomers.map((function(e,t){return e.visible?z.a.createElement(ee,{key:t,customer:e,index:t}):z.a.createElement(U,{key:t,index:t})}))))))),z.a.createElement(j.a,{path:"/"},z.a.createElement(_,null))))}C.a.render(z.a.createElement(z.a.StrictMode,null,z.a.createElement(ce,null)),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.f930c49a.chunk.js.map